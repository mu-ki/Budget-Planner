@model IEnumerable<BudgetPlanner.Web.Models.Category>
@{
    ViewData["Title"] = "Categories";
}

<h1>Categories</h1>

<p>
    <a asp-action="AddCategory" class="btn btn-primary">Add Category</a>
    <a asp-action="Dashboard" class="btn btn-secondary">Back to Dashboard</a>
</p>

<p class="text-muted">Categories help you organize income and expenses. Assign categories when adding income or expense entries.</p>

<div class="row">
    <div class="col-md-6">
        <div class="card mb-3">
            <div class="card-header bg-success text-white"><strong>Income Categories</strong></div>
            <div class="card-body p-0">
                <table class="table table-sm mb-0">
                    <tbody>
                        @foreach (var c in Model.Where(x => x.Type == BudgetPlanner.Web.Models.CategoryType.Income))
                        {
                            <tr>
                                <td>@c.Name</td>
                                <td class="text-right">
                                    <a asp-action="EditCategory" asp-route-id="@c.Id" class="btn btn-sm btn-outline-primary">Edit</a>
                                    <form asp-action="DeleteCategory" asp-route-id="@c.Id" method="post" class="d-inline" onsubmit="return confirm('Delete this category?');">
                                        @Html.AntiForgeryToken()
                                        <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
                                    </form>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                @if (!Model.Any(x => x.Type == BudgetPlanner.Web.Models.CategoryType.Income))
                {
                    <p class="text-muted p-3 mb-0">No income categories. <a asp-action="AddCategory">Add one</a>.</p>
                }
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card mb-3">
            <div class="card-header bg-danger text-white"><strong>Expense Categories</strong></div>
            <div class="card-body p-0">
                <table class="table table-sm mb-0">
                    <tbody>
                        @foreach (var c in Model.Where(x => x.Type == BudgetPlanner.Web.Models.CategoryType.Expense))
                        {
                            <tr>
                                <td>@c.Name</td>
                                <td class="text-right">
                                    <a asp-action="EditCategory" asp-route-id="@c.Id" class="btn btn-sm btn-outline-primary">Edit</a>
                                    <form asp-action="DeleteCategory" asp-route-id="@c.Id" method="post" class="d-inline" onsubmit="return confirm('Delete this category?');">
                                        @Html.AntiForgeryToken()
                                        <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
                                    </form>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                @if (!Model.Any(x => x.Type == BudgetPlanner.Web.Models.CategoryType.Expense))
                {
                    <p class="text-muted p-3 mb-0">No expense categories. <a asp-action="AddCategory">Add one</a>.</p>
                }
            </div>
        </div>
    </div>
</div>
